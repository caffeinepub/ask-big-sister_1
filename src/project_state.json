{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "3D matching game (Stone Match) with login functionality; current work focuses on fixing login and in-game glitching issues.",
  "architectural_notes": [],
  "known_issues": [
    "Login issue preventing or disrupting user access/authentication.",
    "Glitching/visual or gameplay issue occurring during Stone Match 3D matching gameplay."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-fix-the-authentication-gating-so-the-app-consistently-treats-a-user-as-logged-in-when-a-valid-internet-identity-is-already-loaded-from-storage-without-requiring-loginstatus-success-update-frontend-src-app-tsx-and-any-related-ui-logic-to-use-a-single-correct-definition-of-authenticated-based-on-the-presence-of-a-non-anonymous-identity-and-ensure-routing-profile-gate-behavior-works-after-page-reload",
      "title": "Fix the authentication gating so the app consistently treats a user as logged in when a valid Internet Identity is already loaded from storage (without requiring `loginStatus === \"success\"`). Update `frontend/src/App.tsx` and any related UI logic to use a single, correct definition of “authenticated” based on the presence of a non-anonymous identity, and ensure routing/profile-gate behavior works after page reload.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-prevent-authenticated-profile-react-query-calls-from-running-in-an-unauthenticated-anonymous-state-and-handle-backend-authorization-traps-cleanly-update-frontend-src-hooks-usequeries-ts-so-usegetcalleruserprofile-and-wallet-related-queries-mutations-only-execute-when-the-user-is-truly-authenticated-and-ensure-errors-caused-by-missing-auth-e-g-unauthorized-traps-do-not-create-a-broken-login-loop-or-persistent-error-state",
      "title": "Prevent authenticated-profile React Query calls from running in an unauthenticated/anonymous state and handle backend authorization traps cleanly. Update `frontend/src/hooks/useQueries.ts` so `useGetCallerUserProfile` and wallet-related queries/mutations only execute when the user is truly authenticated, and ensure errors caused by missing auth (e.g., unauthorized traps) do not create a broken login loop or persistent error state.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-stone-match-3d-gameplay-glitching-by-stabilizing-stone-rendering-and-state-transitions-during-swaps-cascades-in-frontend-src-game-three-stonematch3dboard-tsx-and-related-match-3-state-management-eliminate-visual-flicker-jumping-caused-by-remounting-stones-e-g-unstable-react-keys-tied-to-changing-tile-ids-and-ensure-interaction-is-correctly-disabled-while-animations-state-transitions-are-in-progress",
      "title": "Fix the Stone Match 3D gameplay “glitching” by stabilizing stone rendering and state transitions during swaps/cascades. In `frontend/src/game/three/StoneMatch3DBoard.tsx` and related match-3 state management, eliminate visual flicker/jumping caused by remounting stones (e.g., unstable React keys tied to changing tile IDs) and ensure interaction is correctly disabled while animations/state transitions are in progress.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [],
  "gameProjectType": "3d",
  "projectName": "Stone Match 3D",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}